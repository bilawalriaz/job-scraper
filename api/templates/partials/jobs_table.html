<div class="table-responsive">
    <table class="table table-hover mb-0">
        <thead class="table-light">
            <tr>
                <th>Title</th>
                <th>Company</th>
                <th>Location</th>
                <th>Salary</th>
                <th>Type</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for job in jobs %}
            <tr class="job-card">
                <td>
                    <a href="/jobs/{{ job.id }}" class="text-decoration-none fw-bold">
                        {{ job.title }}
                    </a>
                    {% if job.is_edited %}
                    <i class="bi bi-pencil-square text-muted small" title="Edited"></i>
                    {% endif %}
                </td>
                <td>{{ job.company }}</td>
                <td>{{ job.location }}</td>
                <td>{{ job.salary or '-' }}</td>
                <td>
                    {% if job.employment_type %}
                    <span class="badge bg-secondary">{{ job.employment_type }}</span>
                    {% else %}
                    -
                    {% endif %}
                </td>
                <td>
                    <span class="status-badge status-{{ job.status or 'new' }}">
                        {{ (job.status or 'new').title() }}
                    </span>
                </td>
                <td>
                    <div class="btn-group btn-group-sm">
                        <a href="/jobs/{{ job.id }}" class="btn btn-outline-primary">
                            <i class="bi bi-eye"></i>
                        </a>
                        <button class="btn btn-outline-success"
                                hx-put="/htmx/jobs/{{ job.id }}/applied"
                                hx-swap="none"
                                title="{{ 'Mark applied' if not job.is_applied else 'Applied' }}">
                            <i class="bi bi-{{ 'check-circle' if not job.is_applied else 'check-circle-fill' }}"></i>
                        </button>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="7" class="text-center py-5 text-muted">
                    <i class="bi bi-inbox fs-1 d-block mb-2"></i>
                    No jobs found
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% if total_pages > 1 %}
<nav aria-label="Jobs pagination" class="mt-3">
    <ul class="pagination justify-content-center">
        <li class="page-item {{ 'disabled' if page == 1 else '' }}">
            <a class="page-link" href="?page={{ page - 1 }}&per_page={{ per_page }}"
               hx-get="/htmx/jobs?page={{ page - 1 }}&per_page={{ per_page }}"
               hx-target="#jobs-table"
               hx-push-url="true">Previous</a>
        </li>
        {% for p in range(1, total_pages + 1) %}
            {% if p == page or p == 1 or p == total_pages or (p >= page - 2 and p <= page + 2) %}
                <li class="page-item {{ 'active' if p == page else '' }}">
                    <a class="page-link" href="?page={{ p }}&per_page={{ per_page }}"
                       hx-get="/htmx/jobs?page={{ p }}&per_page={{ per_page }}"
                       hx-target="#jobs-table"
                       hx-push-url="true">{{ p }}</a>
                </li>
            {% elif p == page - 3 or p == page + 3 %}
                <li class="page-item disabled"><span class="page-link">...</span></li>
            {% endif %}
        {% endfor %}
        <li class="page-item {{ 'disabled' if page == total_pages else '' }}">
            <a class="page-link" href="?page={{ page + 1 }}&per_page={{ per_page }}"
               hx-get="/htmx/jobs?page={{ page + 1 }}&per_page={{ per_page }}"
               hx-target="#jobs-table"
               hx-push-url="true">Next</a>
        </li>
    </ul>
</nav>
{% endif %}
