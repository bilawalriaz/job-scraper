<div class="modal-header">
    <h5 class="modal-title">{{ 'New' if not config else 'Edit' }} Search Configuration</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<form hx-post="{{ '/htmx/configs' if not config else '/htmx/configs/' ~ config.id }}"
      hx-target="#configs-table"
      _="on htmx:afterRequest(loaded, detail) if detail.detail.successful trigger bs-modal-hide">
    <div class="modal-body">
        <div class="mb-3">
            <label class="form-label">Name</label>
            <input type="text" class="form-control" name="name" value="{{ config.name if config else '' }}" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Keywords</label>
            <input type="text" class="form-control" name="keywords" value="{{ config.keywords if config else '' }}" required
                   placeholder="e.g., DevOps Engineer, Azure Cloud Engineer">
            <small class="text-muted">Comma-separated keywords</small>
        </div>
        <div class="mb-3">
            <label class="form-label">Location</label>
            <input type="text" class="form-control" name="location" value="{{ config.location if config else '' }}" required
                   placeholder="e.g., London, Remote">
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Radius (miles)</label>
                <input type="number" class="form-control" name="radius" value="{{ config.radius if config else 10 }}" min="0" max="100">
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Employment Types</label>
                <input type="text" class="form-control" name="employment_types" value="{{ config.employment_types if config else '' }}"
                       placeholder="permanent,contract,whf">
                <small class="text-muted">Optional: comma-separated</small>
            </div>
        </div>
        <div class="mb-3">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" name="enabled" id="enabled" {{ 'checked' if config and config.enabled else 'checked' }}>
                <label class="form-check-label" for="enabled">
                    Enabled (run in automated scrapes)
                </label>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">
            <span class="htmx-indicator">
                <span class="spinner-border spinner-border-sm me-1"></span>
            </span>
            Save
        </button>
    </div>
</form>
